<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mundo michi</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <header>
        <h1>Michi de consejero ğŸ˜¸ğŸ˜¸</h1>
    </header>
    <section>
        <div>
            <figure>
                <img id="image"
                    src="https://images.pexels.com/photos/1643457/pexels-photo-1643457.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2"
                    alt="michi feli">
            </figure>
            <p>Soy tu michi de confianza estoy aquÃ­ para darte Ã¡nimos y que sigas dÃ¡ndole con todo wee</p>
            <button onclick="isToastVisible('visible')">Pedir aiuda</button>
        </div>
    </section>
    <footer>
        <div id="toast">
            <div id="emoji">ğŸŒ·</div>
            <p id="phrase">"Florecer exige pasar por todas las estaciones"</p>
            <button onclick="setPhraseAndCloseToast()"></button>
        </div>
    </footer>
    <div>
        <span id="credit"">Hecho con el â¤ por Jorge GarzÃ³n - DiseÃ±ador Web</span>
    </div>
</body>

<script>
    const toast = document.getElementById('toast')
    const emoji = document.getElementById('emoji')
    const phrase = document.getElementById('phrase')
    const image = document.getElementById('image')
    const BASE_API = 'https://api.thecatapi.com/v1/images/search'

    const phrases = [
        {
            emoji: 'ğŸŒ·',
            phrase: '"Florecer exige pasar por todas las estaciones"'
        },
        {
            emoji: 'ğŸ˜˜',
            phrase: '"No culpes a una versiÃ³n mÃ¡s pequeÃ±a de ti por no saber antes lo que sabes ahora"'
        },
        {
            emoji: 'ğŸ’ª',
            phrase: '"Si crees que puedes, ya estÃ¡s a medio camino"'
        },
        {
            emoji: 'ğŸ¥‡',
            phrase: '"Nunca te rindas, lo bueno estÃ¡ por llegar"'
        },
        {
            emoji: 'ğŸ’•',
            phrase: '"En el verdadero amor no manda nadie; obedecen los dos"'
        },
        {
            emoji: 'ğŸ™Œ',
            phrase: '"Hazlo ahora. A veces el â€œdespuÃ©sâ€ no llega nunca"'
        },
        {
            emoji: 'ğŸšª',
            phrase: '"Pide y se te darÃ¡; busca y encontrarÃ¡s; llama y la puerta se abrirÃ¡"'
        },
        {
            emoji: 'ğŸš€',
            phrase: '"Ve a por el ahora. El futuro no estÃ¡ asegurado para nadie"'
        }
    ]

    const getRandomInt = (max) => {
        return Math.floor(Math.random() * Math.floor(max));
    };

    const getRandomPhrase = () => {
        const randomNumber = getRandomInt(phrases.length);
        emoji.innerHTML = phrases[randomNumber].emoji;
        phrase.innerHTML = phrases[randomNumber].phrase;
    };

    const getRandomMichi = async () => {
        const response = await fetch(`${BASE_API}`);
        const michi = await response.json();
        const randomMichi = getRandomInt(100000); // agregar nÃºmero aleatorio para evitar cachÃ©
        image.src = `${michi[0].url}?${randomMichi}`;
    };

    const setNewPhrase = () => {
        const randomNumber = Math.floor(Math.random() * phrases.length) // Obtener un nÃºmero aleatorio dentro del rango de la matriz phrases
        emoji.innerHTML = phrases[randomNumber].emoji
        phrase.innerHTML = phrases[randomNumber].phrase
    }

    const setPhraseAndCloseToast = () => {
        isToastVisible('hidden')
        setNewMichi()
        setNewPhrase() // Agregar llamada a la funciÃ³n setNewPhrase() para cambiar la frase
    }

    const setNewMichi = async () => {
        const response = await fetch(BASE_API)
        const michi = await response.json()
        image.src = michi[0].url
    }

    const isToastVisible = (value) => toast.style.visibility = value

</script>

</html>